<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patrón Interactivo - Conejito Amigurumi | Atelier Kallos</title>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #ffd1e8 0%, #d4e7ff 100%);
            min-height: 100vh;
            padding: 20px;
            transition: background 0.3s ease;
        }

        body.dark-mode {
            background: linear-gradient(135deg, #2d1b3d 0%, #1a2332 100%);
        }

        body.dark-mode .page {
            background: #2a2a3e;
            color: #e0e0e0;
        }

        body.dark-mode h2, body.dark-mode h3 {
            color: #ff9dcc;
        }

        body.dark-mode p, body.dark-mode li {
            color: #b8b8c8;
        }

        body.dark-mode .pattern-section,
        body.dark-mode .assembly-section,
        body.dark-mode .glossary,
        body.dark-mode .tip-box {
            background: #363650;
            border-color: #ff9dcc;
        }

        body.dark-mode .pattern-steps,
        body.dark-mode .glossary-item {
            background: #2a2a3e;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        /* Barra de progreso */
        .progress-container {
            position: sticky;
            top: 0;
            z-index: 100;
            background: white;
            padding: 15px 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        body.dark-mode .progress-container {
            background: #2a2a3e;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .progress-text {
            font-weight: 600;
            color: #d63384;
            font-size: 14px;
        }

        body.dark-mode .progress-text {
            color: #ff9dcc;
        }

        .progress-bar-container {
            width: 100%;
            height: 12px;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        body.dark-mode .progress-bar-container {
            background: #1a1a2e;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #d63384 0%, #ff6b9d 100%);
            border-radius: 10px;
            transition: width 0.5s ease;
            position: relative;
        }

        .progress-bar-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Controles flotantes */
        .floating-controls {
            position: fixed;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 99;
        }

        .control-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            background: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            cursor: pointer;
            font-size: 20px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        body.dark-mode .control-btn {
            background: #363650;
        }

        .control-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        /* Contador de puntos */
        .stitch-counter {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            z-index: 98;
            min-width: 200px;
            display: none;
        }

        body.dark-mode .stitch-counter {
            background: #2a2a3e;
        }

        .stitch-counter.active {
            display: block;
            animation: slideInUp 0.3s ease;
        }

        @keyframes slideInUp {
            from { transform: translateY(100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .counter-display {
            font-size: 48px;
            font-weight: bold;
            color: #d63384;
            text-align: center;
            margin: 15px 0;
        }

        .counter-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .counter-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
        }

        .counter-btn.plus {
            background: #d63384;
            color: white;
        }

        .counter-btn.minus {
            background: #f0f0f0;
            color: #666;
        }

        body.dark-mode .counter-btn.minus {
            background: #1a1a2e;
            color: #b8b8c8;
        }

        .counter-btn.reset {
            background: #ffc107;
            color: white;
        }

        .counter-btn:hover {
            transform: translateY(-2px);
        }

        /* Navegación */
        .navigation {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .nav-btn {
            background: white;
            border: 2px solid #ffb3d9;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            color: #d63384;
            transition: all 0.3s;
            font-size: 14px;
        }

        body.dark-mode .nav-btn {
            background: #363650;
            border-color: #ff9dcc;
            color: #ff9dcc;
        }

        .nav-btn:hover {
            background: #ffb3d9;
            color: white;
            transform: translateY(-2px);
        }

        .nav-btn.active {
            background: #d63384;
            color: white;
            box-shadow: 0 5px 15px rgba(214, 51, 132, 0.3);
        }

        /* Páginas */
        .page {
            background: white;
            border-radius: 30px;
            padding: 50px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            min-height: 600px;
            display: none;
            animation: fadeIn 0.5s;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Portada */
        .portada {
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #ffd1e8 0%, #d4e7ff 100%);
            position: relative;
            overflow: hidden;
        }

        .portada::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.5; }
            50% { transform: scale(1.1) rotate(180deg); opacity: 0.8; }
        }

        .bunny-circle {
            width: 180px;
            height: 180px;
            background: white;
            border: 8px solid white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 100px;
            box-shadow: 0 15px 50px rgba(214, 51, 132, 0.3);
            animation: float 3s ease-in-out infinite;
            position: relative;
            z-index: 1;
            margin-bottom: 40px;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(-5deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        .portada h1 {
            font-family: 'Crimson Text', serif;
            font-size: 52px;
            color: #d63384;
            margin-bottom: 20px;
            font-weight: 600;
            position: relative;
            z-index: 1;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .portada .subtitle {
            font-size: 20px;
            color: #6c757d;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }

        .brand-section {
            position: relative;
            z-index: 1;
            margin-top: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .brand-name {
            font-size: 28px;
            color: #d63384;
            font-weight: 700;
            margin-bottom: 8px;
            font-family: 'Crimson Text', serif;
        }

        .brand-slogan {
            font-size: 16px;
            color: #6c757d;
            font-style: italic;
            font-weight: 400;
        }

        /* Títulos generales */
        h2 {
            font-family: 'Crimson Text', serif;
            color: #d63384;
            font-size: 36px;
            margin-bottom: 25px;
            text-align: center;
        }

        h3 {
            font-family: 'Crimson Text', serif;
            color: #d63384;
            font-size: 24px;
            margin: 25px 0 15px 0;
            font-weight: 600;
        }

        p {
            line-height: 1.8;
            color: #495057;
            margin-bottom: 15px;
            font-size: 15px;
        }

        /* Info boxes */
        .info-boxes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .info-box {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid #ffb3d9;
        }

        .info-box h3 {
            font-size: 20px;
            margin: 0 0 10px 0;
        }

        /* Glosario */
        .glossary {
            background: #e8f4ff;
            padding: 20px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .glossary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .glossary-item {
            background: white;
            padding: 12px;
            border-radius: 8px;
            font-size: 13px;
        }

        .glossary-item strong {
            color: #d63384;
            font-size: 15px;
            display: block;
            margin-bottom: 3px;
        }

        /* Patrón */
        .pattern-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 4px solid #d63384;
        }

        .pattern-section h3 {
            margin-top: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .pattern-steps {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
        }

        .pattern-steps ol {
            padding-left: 25px;
        }

        .pattern-steps li {
            margin: 12px 0;
            line-height: 1.7;
            color: #495057;
        }

        .pattern-steps li strong {
            color: #d63384;
        }

        .tip-box {
            background: #fff9e6;
            padding: 15px 20px;
            border-radius: 10px;
            border-left: 4px solid #ffc107;
            margin: 20px 0;
            font-size: 14px;
        }

        .tip-box strong {
            color: #856404;
            display: block;
            margin-bottom: 5px;
        }

        /* Assembly */
        .assembly-section {
            background: linear-gradient(135deg, #fff5f9 0%, #f0f8ff 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .assembly-section h3 {
            text-align: center;
            margin-bottom: 20px;
        }

        .assembly-section ul {
            list-style: none;
            padding: 0;
        }

        .assembly-section li {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            padding-left: 50px;
            position: relative;
        }

        .assembly-section li:before {
            content: "🪡";
            position: absolute;
            left: 15px;
            font-size: 20px;
        }

        /* CTA Section */
        .cta-section {
            text-align: center;
            margin-top: 40px;
        }

        .cta-content {
            background: linear-gradient(135deg, #fff5f9 0%, #ffe5f0 100%);
            padding: 40px;
            border-radius: 20px;
            margin-bottom: 30px;
        }

        .cta-content h3 {
            font-size: 32px;
            margin-bottom: 20px;
        }

        .cta-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .cta-button {
            display: inline-block;
            padding: 18px 40px;
            text-decoration: none;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 600;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            font-family: 'Poppins', sans-serif;
        }

        .cta-whatsapp {
            background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
            color: white;
            box-shadow: 0 8px 25px rgba(37, 211, 102, 0.4);
        }

        .cta-whatsapp:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(37, 211, 102, 0.5);
        }

        .cta-surprise {
            background: linear-gradient(135deg, #ff6b9d 0%, #d63384 100%);
            color: white;
            box-shadow: 0 8px 25px rgba(214, 51, 132, 0.4);
        }

        .cta-surprise:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(214, 51, 132, 0.5);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 50px;
            border-radius: 30px;
            max-width: 700px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            text-align: center;
            animation: modalSlideIn 0.5s ease;
        }

        body.dark-mode .modal-content {
            background: #2a2a3e;
        }

        @keyframes modalSlideIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .modal-content h3 {
            font-family: 'Crimson Text', serif;
            color: #d63384;
            font-size: 36px;
            margin-bottom: 20px;
        }

        .modal-content p {
            font-size: 16px;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .modal-emoji {
            font-size: 80px;
            margin: 20px 0;
            animation: spin 2s ease-in-out;
        }

        @keyframes spin {
            0% { transform: rotate(0deg) scale(0); }
            50% { transform: rotate(180deg) scale(1.2); }
            100% { transform: rotate(360deg) scale(1); }
        }

        /* Certificado */
        #certificateCanvas {
            max-width: 100%;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin: 20px 0;
        }

        .certificate-features {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: left;
        }

        .certificate-features ul {
            list-style: none;
            padding: 0;
        }

        .certificate-features li {
            padding: 8px 0;
            color: #495057;
        }

        .certificate-features li:before {
            content: "✨ ";
            color: #d63384;
        }

        .share-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 25px;
        }

        .share-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .share-btn.download {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .share-btn.whatsapp {
            background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
            color: white;
        }

        .share-btn.copy {
            background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);
            color: white;
        }

        .share-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .close-modal {
            background: #6c757d;
            color: white;
            border: none;
            padding: 15px 35px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
        }

        .close-modal:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .input-field {
            width: 100%;
            padding: 15px;
            border: 2px solid #ffb3d9;
            border-radius: 10px;
            font-size: 16px;
            font-family: 'Poppins', sans-serif;
            margin: 10px 0;
        }

        .input-field:focus {
            outline: none;
            border-color: #d63384;
        }

        /* Confetti */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #d63384;
            position: fixed;
            animation: confetti-fall 3s linear forwards;
            z-index: 9999;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .page {
                padding: 30px 20px;
            }

            .portada h1 {
                font-size: 36px;
            }

            .bunny-circle {
                width: 140px;
                height: 140px;
                font-size: 70px;
            }

            h2 {
                font-size: 28px;
            }

            .cta-buttons {
                flex-direction: column;
            }

            .cta-button {
                width: 100%;
            }

            .navigation {
                gap: 8px;
            }

            .nav-btn {
                padding: 10px 16px;
                font-size: 12px;
            }

            .floating-controls {
                right: 10px;
            }

            .stitch-counter {
                right: 10px;
                bottom: 10px;
                min-width: 160px;
            }

            .counter-display {
                font-size: 36px;
            }

            .modal-content {
                padding: 30px 20px;
            }

            .share-buttons {
                flex-direction: column;
            }

            .share-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Barra de Progreso -->
        <div class="progress-container">
            <div class="progress-header">
                <span class="progress-text">Progreso del Patrón</span>
                <span class="progress-text" id="progressPercent">0%</span>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar-fill" id="progressBar" style="width: 0%"></div>
            </div>
        </div>

        <!-- Controles Flotantes -->
        <div class="floating-controls">
            <button class="control-btn" id="darkModeBtn" onclick="toggleDarkMode()" title="Modo Oscuro">🌙</button>
            <button class="control-btn" onclick="toggleCounter()" title="Contador de Puntos">🔢</button>
        </div>

        <!-- Contador de Puntos -->
        <div class="stitch-counter" id="stitchCounter">
            <h4 style="text-align: center; color: #d63384; margin-bottom: 10px;">Contador de Puntos</h4>
            <div class="counter-display" id="counterDisplay">0</div>
            <div class="counter-buttons">
                <button class="counter-btn plus" onclick="incrementCounter()">+1</button>
                <button class="counter-btn minus" onclick="decrementCounter()">-1</button>
            </div>
            <button class="counter-btn reset" style="width: 100%; margin-top: 10px;" onclick="resetCounter()">Reset</button>
        </div>

        <!-- Navegación -->
        <div class="navigation">
            <button class="nav-btn active" onclick="showPage(1)">🏠 Inicio</button>
            <button class="nav-btn" onclick="showPage(2)">📖 Glosario</button>
            <button class="nav-btn" onclick="showPage(3)">🎯 Cabeza & Cuerpo</button>
            <button class="nav-btn" onclick="showPage(4)">👂 Orejas & Extremidades</button>
            <button class="nav-btn" onclick="showPage(5)">🪡 Montaje</button>
            <button class="nav-btn" onclick="showPage(6)">🎁 SORPRESA</button>
        </div>

        <!-- PÁGINA 1: PORTADA -->
        <div class="page portada active" id="page1">
            <div class="bunny-circle">🐰</div>
            <h1>Patrón Completo<br>Conejito Dulce</h1>
            <p class="subtitle">Guía paso a paso con instrucciones detalladas</p>
            
            <div class="brand-section">
                <div class="brand-name">Atelier Kallos</div>
                <div class="brand-slogan">Donde la paciencia se transforma en arte.</div>
            </div>
            
            <div class="info-boxes">
                <div class="info-box">
                    <h3>📏 Tamaño</h3>
                    <p>12-14 cm de alto</p>
                </div>
                <div class="info-box">
                    <h3>⏱️ Tiempo</h3>
                    <p>2-3 horas</p>
                </div>
                <div class="info-box">
                    <h3>⭐ Nivel</h3>
                    <p>Principiante</p>
                </div>
            </div>
        </div>

        <!-- PÁGINA 2: GLOSARIO -->
        <div class="page" id="page2">
            <h2>📖 Glosario de Abreviaturas</h2>
            
            <p style="text-align: center; margin-bottom: 30px;">
                Antes de empezar, familiarízate con estas abreviaturas que usaremos en el patrón
            </p>

            <div class="glossary">
                <div class="glossary-grid">
                    <div class="glossary-item">
                        <strong>pb</strong>
                        <p>Punto bajo</p>
                    </div>
                    <div class="glossary-item">
                        <strong>aum</strong>
                        <p>Aumento (2 pb en mismo punto)</p>
                    </div>
                    <div class="glossary-item">
                        <strong>dism</strong>
                        <p>Disminución (2 pb juntos)</p>
                    </div>
                    <div class="glossary-item">
                        <strong>V</strong>
                        <p>Vuelta o fila</p>
                    </div>
                    <div class="glossary-item">
                        <strong>( )</strong>
                        <p>Repetir lo indicado</p>
                    </div>
                    <div class="glossary-item">
                        <strong>x2</strong>
                        <p>Hacer 2 piezas iguales</p>
                    </div>
                </div>
            </div>

            <div class="tip-box">
                <strong>💡 Consejo antes de empezar:</strong>
                Usa un marcador de puntos para señalar el inicio de cada vuelta. Te ayudará a no perderte en el conteo.
            </div>

            <div style="background: #fff5f9; padding: 25px; border-radius: 15px; margin-top: 30px;">
                <h3 style="text-align: center; margin-bottom: 15px;">🧶 Materiales que necesitas</h3>
                <ul style="list-style: none; padding: 0;">
                    <li style="padding: 8px 0;">✓ Hilo de algodón (color principal y para detalles)</li>
                    <li style="padding: 8px 0;">✓ Aguja de crochet 3.0 mm</li>
                    <li style="padding: 8px 0;">✓ Relleno de fibra sintética</li>
                    <li style="padding: 8px 0;">✓ Marcador de puntos</li>
                    <li style="padding: 8px 0;">✓ Tijeras y aguja lanera para coser</li>
                    <li style="padding: 8px 0;">✓ Alfileres (opcional)</li>
                </ul>
            </div>
        </div>

        <!-- PÁGINA 3: CABEZA Y CUERPO -->
        <div class="page" id="page3">
            <h2>🎯 Cabeza y Cuerpo</h2>

            <div class="pattern-section">
                <h3>🔴 Cabeza</h3>
                <div class="pattern-steps">
                    <ol>
                        <li><strong>V1:</strong> Hacer un anillo mágico con 6 pb. Cierra con punto deslizado.</li>
                        <li><strong>V2:</strong> Aumentar en cada punto (2 pb en cada uno). Total: <strong>12 pb</strong></li>
                        <li><strong>V3:</strong> (1 pb, 1 aum) repetir 6 veces. Total: <strong>18 pb</strong></li>
                        <li><strong>V4:</strong> (2 pb, 1 aum) repetir 6 veces. Total: <strong>24 pb</strong></li>
                        <li><strong>V5-V8:</strong> Tejer 4 vueltas completas sin cambios. Cada vuelta = 24 pb</li>
                        <li><strong>V9:</strong> (2 pb, 1 dism) repetir 6 veces. Total: <strong>18 pb</strong></li>
                        <li><strong>V10:</strong> (1 pb, 1 dism) repetir 6 veces. Total: <strong>12 pb</strong></li>
                        <li><strong>Final:</strong> Rellenar firmemente con fibra. Cerrar y dejar hebra larga para coser.</li>
                    </ol>
                </div>
                <div class="tip-box">
                    <strong>💡 Tip importante:</strong>
                    Rellena la cabeza antes de cerrar completamente. Una cabeza firme mantiene mejor la forma.
                </div>
            </div>

            <div class="pattern-section">
                <h3>🔵 Cuerpo</h3>
                <div class="pattern-steps">
                    <ol>
                        <li><strong>V1:</strong> Anillo mágico con 6 pb</li>
                        <li><strong>V2:</strong> (1 pb, 1 aum) repetir 3 veces. Total: <strong>9 pb</strong></li>
                        <li><strong>V3:</strong> (2 pb, 1 aum) repetir 3 veces. Total: <strong>12 pb</strong></li>
                        <li><strong>V4-V6:</strong> Tejer 3 vueltas sin cambios. Cada vuelta = 12 pb</li>
                        <li><strong>V7:</strong> (1 pb, 1 dism) repetir 3 veces. Total: <strong>8 pb</strong></li>
                        <li><strong>Final:</strong> Rellenar y cerrar dejando hebra larga para unir a la cabeza</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- PÁGINA 4: OREJAS Y EXTREMIDADES -->
        <div class="page" id="page4">
            <h2>👂 Orejas y Extremidades</h2>

            <div class="pattern-section">
                <h3>👂 Orejas (hacer 2 piezas)</h3>
                <div class="pattern-steps">
                    <ol>
                        <li><strong>V1:</strong> Anillo mágico con 5 pb</li>
                        <li><strong>V2:</strong> 1 pb en cada punto (5 pb, sin aumentar)</li>
                        <li><strong>V3:</strong> 1 dism, 3 pb. Total: <strong>4 pb</strong></li>
                        <li><strong>V4:</strong> 1 pb en cada punto (4 pb)</li>
                        <li><strong>Final:</strong> Cerrar y dejar hebra larga. <strong>NO rellenar</strong> las orejas</li>
                    </ol>
                </div>
                <div class="tip-box">
                    <strong>🐰 Consejo:</strong>
                    Las orejas sin relleno quedan más naturales y flexibles.
                </div>
            </div>

            <div class="pattern-section">
                <h3>💪 Brazos (hacer 2 piezas)</h3>
                <div class="pattern-steps">
                    <ol>
                        <li><strong>V1:</strong> Anillo mágico con 5 pb</li>
                        <li><strong>V2-V3:</strong> Tejer 2 vueltas sin aumentos (5 pb cada una)</li>
                        <li><strong>Final:</strong> Cerrar dejando hebra larga. Rellenar ligeramente solo la punta</li>
                    </ol>
                </div>
            </div>

            <div class="pattern-section">
                <h3>🦵 Piernas (hacer 2 piezas)</h3>
                <div class="pattern-steps">
                    <ol>
                        <li><strong>V1:</strong> Anillo mágico con 6 pb</li>
                        <li><strong>V2-V3:</strong> Tejer 2 vueltas sin aumentos (6 pb cada una)</li>
                        <li><strong>Final:</strong> Cerrar dejando hebra larga. Rellenar ligeramente</li>
                    </ol>
                </div>
            </div>

            <div class="pattern-section">
                <h3>🎀 Cola (Pompón)</h3>
                <div class="pattern-steps">
                    <ol>
                        <li><strong>V1:</strong> Anillo mágico con 6 pb</li>
                        <li><strong>V2:</strong> Aumentar en cada punto. Total: <strong>12 pb</strong></li>
                        <li><strong>V3:</strong> (1 pb, 1 dism) repetir 4 veces. Total: <strong>8 pb</strong></li>
                        <li><strong>Final:</strong> Rellenar bien y cerrar dejando hebra larga</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- PÁGINA 5: MONTAJE -->
        <div class="page" id="page5">
            <h2>🪡 Montaje Final</h2>

            <p style="text-align: center; margin-bottom: 30px; font-size: 16px;">
                Ahora vamos a unir todas las piezas para dar vida a tu conejito
            </p>

            <div class="assembly-section">
                <h3>Orden de montaje recomendado:</h3>
                <ul>
                    <li><strong>1.</strong> Cose la cabeza al cuerpo bien centrada y firme</li>
                    <li><strong>2.</strong> Coloca las orejas en la parte superior de la cabeza</li>
                    <li><strong>3.</strong> Cose los brazos a los lados del cuerpo (entre V2-V3)</li>
                    <li><strong>4.</strong> Cose las piernas en la parte inferior, como si estuviera sentado</li>
                    <li><strong>5.</strong> Agrega la colita en la parte trasera (puedes darle posición divertida)</li>
                    <li><strong>6.</strong> Borda los ojos entre V5 y V6 de la cabeza</li>
                    <li><strong>7.</strong> Borda nariz y boca con hilo rosa o negro</li>
                </ul>
            </div>

            <div class="tip-box">
                <strong>✂️ Tip profesional:</strong>
                Antes de coser definitivamente, sujeta las piezas con alfileres para verificar proporciones y posición. Así puedes hacer ajustes sin deshebrar.
            </div>

            <div style="background: linear-gradient(135deg, #d4edda 0%, #c3f0d4 100%); padding: 30px; border-radius: 15px; margin-top: 30px; text-align: center;">
                <h3 style="color: #28a745; margin-bottom: 15px;">🎉 ¡Felicidades!</h3>
                <p style="color: #155724; font-size: 16px;">
                    Has completado tu primer conejito amigurumi. Cada puntada cuenta una historia, 
                    y este es solo el comienzo de tu viaje en el mundo del tejido.
                </p>
            </div>
        </div>

        <!-- PÁGINA 6: CTA -->
        <div class="page" id="page6">
            <h2 style="font-size: 42px;">Y Esto Es Apenas el Comienzo...</h2>

            <div class="cta-content">
                <p style="font-size: 17px; margin-bottom: 20px;">
                    ¿Viste? Lo lograste. Tienes tu conejito entre las manos y esa sensación de "yo hice esto" es increíble, ¿verdad?
                </p>
                <p style="font-size: 16px; color: #6c757d;">
                    Pero déjame decirte algo: este conejito es solo la puerta. Del otro lado hay un mundo entero esperándote. 
                    Más patrones, más técnicas, más colores, más formas... más TÚ descubriendo de qué eres capaz.
                </p>
            </div>

            <div style="background: #f8f9fa; padding: 30px; border-radius: 20px; margin: 30px 0;">
                <h3 style="text-align: center; margin-bottom: 20px;">✨ Lo que viene después</h3>
                <p style="text-align: center; margin-bottom: 25px;">
                    Así como acabas de crear este conejito siguiendo un patrón claro, imagina poder hacer lo mismo 
                    con docenas de otros animalitos. Cada uno con su personalidad, cada uno enseñándote algo nuevo.
                </p>
                <p style="text-align: center; font-size: 16px; color: #495057; margin-bottom: 20px;">
                    La diferencia entre buscar patrones incompletos en internet y tener un <strong style="color: #d63384;">ebook completo en tus manos</strong> 
                    es como la diferencia entre perderte en un bosque o tener un mapa claro del tesoro.
                </p>
                <p style="text-align: center; font-size: 15px; color: #6c757d;">
                    Patrones probados, instrucciones detalladas, trucos que solo la experiencia enseña, 
                    y lo mejor: todo en un solo lugar. Sin buscar, sin frustración, solo crear.
                </p>
            </div>

            <div style="background: #fff9e6; border: 2px solid #ffc107; padding: 25px; border-radius: 15px; margin: 30px 0; text-align: center;">
                <p style="color: #856404; font-size: 15px; margin: 0;">
                    <strong>💭 Piénsalo así:</strong> Este conejito te tomó unas horas y ahora tienes algo que hiciste 
                    con tus propias manos. Imagina tener acceso a una colección completa de patrones donde cada proyecto 
                    está tan bien explicado como este. Sin sorpresas, sin pasos confusos, sin quedarte a medias.
                </p>
            </div>

            <div class="cta-section">
                <p style="font-size: 16px; margin-bottom: 25px;">
                    Si quieres saber más sobre mi ebook completo y cómo puede acompañarte en tu camino, 
                    escríbeme por WhatsApp. Sin presión, solo charlamos.
                </p>
                
                <div class="cta-buttons">
                    <a href="https://wa.link/o4d9gj" target="_blank" rel="noopener noreferrer" class="cta-button cta-whatsapp">
                        💬 Continuar el Proceso
                    </a>
                    <button class="cta-button cta-surprise" onclick="showSurprise()">
                        🎁 Ver Sorpresa
                    </button>
                </div>
                
                <p style="font-size: 13px; color: #6c757d; margin-top: 20px;">
                    Te respondo personalmente y te cuento todo sobre el ebook
                </p>
            </div>

            <div style="background: #f8f9fa; padding: 25px; border-radius: 15px; margin-top: 40px; border-top: 3px solid #d63384;">
                <p style="text-align: center; font-size: 15px; color: #495057; line-height: 1.8; margin: 0;">
                    Sea lo que sea que decidas, estoy orgullosa de que hayas llegado hasta aquí.<br>
                    Tu conejito es la prueba de que puedes crear cosas hermosas. 🌸
                </p>
            </div>
        </div>
    </div>

    <!-- Modal Sorpresa con Certificado -->
    <div class="modal" id="surpriseModal">
        <div class="modal-content">
            <div class="modal-emoji">🎉</div>
            <h3>¡Certificado Digital Personalizado! 🏆</h3>
            
            <div class="certificate-features">
                <h4 style="color: #d63384; margin-bottom: 15px; text-align: center;">Tu certificado incluye:</h4>
                <ul>
                    <li>Tu nombre</li>
                    <li>Nombre de tu conejito</li>
                    <li>Fecha actual</li>
                    <li>Pasos completados (100%)</li>
                    <li>Diseño profesional descargable</li>
                </ul>
            </div>

            <div id="certificateInputs" style="margin: 25px 0;">
                <input type="text" id="userName" class="input-field" placeholder="¿Cómo te llamas?" />
                <input type="text" id="bunnyName" class="input-field" placeholder="Dale un nombre a tu conejito 🐰" />
                <button class="cta-button cta-surprise" onclick="generateCertificate()" style="margin-top: 15px;">
                    ✨ Generar Certificado
                </button>
            </div>

            <div id="certificateDisplay" style="display: none;">
                <canvas id="certificateCanvas" width="800" height="600"></canvas>
                
                <div class="share-buttons">
                    <button class="share-btn download" onclick="downloadCertificate()">
                        📥 Descargar Certificado
                    </button>
                    <button class="share-btn whatsapp" onclick="shareWhatsApp()">
                        💚 Compartir por WhatsApp
                    </button>
                </div>

                <p style="font-size: 13px; color: #6c757d; margin-top: 15px;">
                    ¡Comparte tu logro en redes sociales! 🎨
                </p>
            </div>

            <button class="close-modal" onclick="closeSurprise()">Cerrar</button>
        </div>
    </div>

    <script>
        // Variables globales
        let currentPage = 1;
        let stitchCount = 0;
        let userName = '';
        let bunnyName = '';

        // Navegación de páginas
        function showPage(pageNum) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById('page' + pageNum).classList.add('active');
            document.querySelectorAll('.nav-btn')[pageNum - 1].classList.add('active');
            
            currentPage = pageNum;
            updateProgress();
            
            // Ocultar info-boxes cuando no estamos en la portada
            const infoBoxesContainer = document.querySelector('.info-boxes');
            if (infoBoxesContainer) {
                if (pageNum === 1) {
                    infoBoxesContainer.style.display = 'grid';
                } else {
                    infoBoxesContainer.style.display = 'none';
                }
            }
            
            window.scrollTo({ top: 0, behavior: 'smooth' });

            // Confetti al llegar a página 6 (100%)
            if (pageNum === 6 && !localStorage.getItem('confettiShown')) {
                setTimeout(createConfetti, 500);
                localStorage.setItem('confettiShown', 'true');
            }
        }

        // Actualizar barra de progreso
        function updateProgress() {
            const progress = (currentPage / 6) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressPercent').textContent = Math.round(progress) + '%';
        }

        // Modo oscuro
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            const btn = document.getElementById('darkModeBtn');
            btn.textContent = isDark ? '☀️' : '🌙';
            localStorage.setItem('darkMode', isDark);
        }

        // Cargar preferencia de modo oscuro
        window.addEventListener('DOMContentLoaded', function() {
            if (localStorage.getItem('darkMode') === 'true') {
                document.body.classList.add('dark-mode');
                document.getElementById('darkModeBtn').textContent = '☀️';
            }
        });

        // Contador de puntos
        function toggleCounter() {
            const counter = document.getElementById('stitchCounter');
            counter.classList.toggle('active');
        }

        function incrementCounter() {
            stitchCount++;
            document.getElementById('counterDisplay').textContent = stitchCount;
        }

        function decrementCounter() {
            if (stitchCount > 0) {
                stitchCount--;
                document.getElementById('counterDisplay').textContent = stitchCount;
            }
        }

        function resetCounter() {
            stitchCount = 0;
            document.getElementById('counterDisplay').textContent = stitchCount;
        }

        // Modal sorpresa
        function showSurprise() {
            document.getElementById('surpriseModal').classList.add('active');
            document.getElementById('certificateInputs').style.display = 'block';
            document.getElementById('certificateDisplay').style.display = 'none';
        }

        function closeSurprise() {
            document.getElementById('surpriseModal').classList.remove('active');
        }

        document.getElementById('surpriseModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeSurprise();
            }
        });

        // Confetti
        function createConfetti() {
            const colors = ['#d63384', '#ff6b9d', '#ffb3d9', '#ffd1e8', '#667eea', '#764ba2'];
            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 0.5 + 's';
                    confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 30);
            }
        }

        // Generar Certificado
        function generateCertificate() {
            userName = document.getElementById('userName').value.trim();
            bunnyName = document.getElementById('bunnyName').value.trim();

            if (!userName || !bunnyName) {
                alert('Por favor completa ambos campos 😊');
                return;
            }

            const canvas = document.getElementById('certificateCanvas');
            const ctx = canvas.getContext('2d');

            // Fondo con degradado
            const gradient = ctx.createLinearGradient(0, 0, 800, 600);
            gradient.addColorStop(0, '#ffd1e8');
            gradient.addColorStop(1, '#d4e7ff');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 800, 600);

            // Borde decorativo
            ctx.strokeStyle = '#d63384';
            ctx.lineWidth = 8;
            ctx.strokeRect(20, 20, 760, 560);

            ctx.strokeStyle = '#ffb3d9';
            ctx.lineWidth = 4;
            ctx.strokeRect(35, 35, 730, 530);

            // Título
            ctx.fillStyle = '#d63384';
            ctx.font = 'bold 48px Poppins, Arial';
            ctx.textAlign = 'center';
            ctx.fillText('🏆 Certificado de Logro 🏆', 400, 100);

            // Línea decorativa
            ctx.strokeStyle = '#ff6b9d';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(150, 130);
            ctx.lineTo(650, 130);
            ctx.stroke();

            // Texto principal
            ctx.fillStyle = '#495057';
            ctx.font = '24px Poppins, Arial';
            ctx.fillText('Este certificado se otorga a', 400, 180);

            // Nombre del usuario
            ctx.fillStyle = '#d63384';
            ctx.font = 'bold 42px Crimson Text, serif';
            ctx.fillText(userName, 400, 240);

            // Texto de reconocimiento
            ctx.fillStyle = '#495057';
            ctx.font = '22px Poppins, Arial';
            ctx.fillText('Por completar con éxito el patrón', 400, 290);
            ctx.fillText('del adorable conejito amigurumi', 400, 320);

            // Nombre del conejito
            ctx.fillStyle = '#ff6b9d';
            ctx.font = 'bold italic 36px Crimson Text, serif';
            ctx.fillText(`"${bunnyName}" 🐰`, 400, 380);

            // Detalles
            ctx.fillStyle = '#6c757d';
            ctx.font = '18px Poppins, Arial';
            const today = new Date().toLocaleDateString('es-ES', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            ctx.fillText(`Fecha: ${today}`, 400, 440);
            ctx.fillText('Progreso completado: 100% ✨', 400, 470);

            // Firma
            ctx.fillStyle = '#d63384';
            ctx.font = 'bold 26px Crimson Text, serif';
            ctx.fillText('Atelier Kallos', 400, 530);
            
            ctx.fillStyle = '#6c757d';
            ctx.font = 'italic 16px Poppins, Arial';
            ctx.fillText('Donde la paciencia se transforma en arte', 400, 555);

            // Mostrar certificado
            document.getElementById('certificateInputs').style.display = 'none';
            document.getElementById('certificateDisplay').style.display = 'block';
        }

        // Descargar certificado
        function downloadCertificate() {
            const canvas = document.getElementById('certificateCanvas');
            const link = document.createElement('a');
            link.download = `certificado_${bunnyName}_${userName}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
        }

        // Compartir por WhatsApp
        function shareWhatsApp() {
            // ⚠️ IMPORTANTE: Reemplaza 'TU-URL-AQUI' con la URL real donde esté alojado este HTML
            const leadMagnetURL = 'TU-URL-AQUI'; // Ejemplo: 'https://tudominio.com/patron-conejito.html'
            
            const message = `🎉 ¡Acabo de completar mi conejito amigurumi "${bunnyName}"! 🐰✨\n\n` +
                           `Fue increíble seguir este patrón interactivo paso a paso. ` +
                           `¡Tú también puedes crear el tuyo GRATIS aquí! 👇\n\n` +
                           `${leadMagnetURL}\n\n` +
                           `#Amigurumi #Crochet #AtelierKallos`;
            
            const url = `https://wa.me/?text=${encodeURIComponent(message)}`;
            window.open(url, '_blank');
        }

        // Cerrar modal con tecla Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeSurprise();
            }
        });

        // Navegación con teclado (flechas)
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowRight' && currentPage < 6) {
                showPage(currentPage + 1);
            } else if (e.key === 'ArrowLeft' && currentPage > 1) {
                showPage(currentPage - 1);
            }
        });

        // Inicializar
        updateProgress();

        // Animación de entrada
        window.addEventListener('load', function() {
            document.querySelector('.container').style.opacity = '0';
            document.querySelector('.container').style.transform = 'translateY(20px)';
            document.querySelector('.container').style.transition = 'all 0.5s ease';
            
            setTimeout(() => {
                document.querySelector('.container').style.opacity = '1';
                document.querySelector('.container').style.transform = 'translateY(0)';
            }, 100);
        });
    </script>
</body>
</html>
